import { Router } from "express";
import upload from "../middlewares/multer";
import {
  uploadAvatar,
  uploadCover,
  getProfile,
  getProfileByUsername,
  getAllProfiles,
  updateProfile,
} from "../controllers/profile.controller";

const router = Router();

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* ğŸŸ¢ Ğ‘Ò¯Ñ… Ğ¿Ñ€Ğ¾Ñ„Ğ°Ğ¹Ğ»Ñ‹Ğ³ Ñ‚Ğ°Ñ‚Ğ°Ñ…                 */
/* GET /profiles                          */
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
router.get("/", getAllProfiles);

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* ğŸ”µ Username-Ñ€ Ğ¿Ñ€Ğ¾Ñ„Ğ°Ğ¹Ğ» Ğ°Ğ²Ğ°Ñ…             */
/* GET /profiles/by-username/:username    */
/* â›”ï¸ Ğ­Ğ½Ñ Ğ½ÑŒ Ğ´Ğ¾Ğ¾Ñ€Ñ… userId route-Ñ Ó¨ĞœĞÓ¨ Ğ±Ğ°Ğ¹Ñ… Ñ‘ÑÑ‚Ğ¾Ğ¹ */
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
router.get("/by-username/:username", getProfileByUsername);

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* ğŸŸ  Profile ÑˆĞ¸Ğ½ÑÑ‡Ğ»ÑÑ… (name, about Ğ³ÑÑ… Ğ¼ÑÑ‚) */
/* PATCH /profiles/:userId               */
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
router.patch("/:userId", updateProfile);

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* ğŸŸ¡ UserId-Ñ€ Ğ¿Ñ€Ğ¾Ñ„Ğ°Ğ¹Ğ» Ğ°Ğ²Ğ°Ñ…               */
/* GET /profiles/:userId                  */
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
router.get("/:userId", getProfile);

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* ğŸ”´ Ğ—ÑƒÑ€Ğ°Ğ³ upload (avatar + cover Ñ…Ğ°Ğ¼Ñ‚Ğ°Ğ´ Ğ½ÑŒ) */
/* POST /profiles/upload-avatar          */
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
router.post(
  "/upload-avatar",
  upload.fields([
    { name: "avatar", maxCount: 1 },
    { name: "cover", maxCount: 1 },
  ]),
  uploadAvatar
);

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* ğŸ”´ Ğ—Ó©Ğ²Ñ…Ó©Ğ½ cover Ğ·ÑƒÑ€Ğ°Ğ³ upload Ñ…Ğ¸Ğ¹Ñ…       */
/* POST /profiles/upload-cover           */
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
router.post("/upload-cover", upload.single("cover"), uploadCover);

export default router;
